<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Generator KTP Mainan - Academy</title>
    <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; background: #f0f8ff; padding: 20px; margin: 0; }
        .container { max-width: 900px; margin: auto; }
        form { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px rgba(0,0,0,0.1); }
        input, select, button { margin: 10px 0; padding: 10px; width: 100%; box-sizing: border-box; }
        button { background: #007bff; color: white; cursor: pointer; border: none; border-radius: 5px; }
        button:hover { background: #0056b3; }
        #btn-autofill { background: #17a2b8; }
        #btn-autofill:hover { background: #138496; }

        #page1 { display: block; }
        #page2 { display: none; text-align: center; padding: 20px; background: #111; min-height: 100vh; }

        #ktp { 
            position: relative;
            display: inline-block;
            width: 800px; 
            height: 530px;
            border: 5px solid #333;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }
        #ktp-bg {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            object-fit: cover;
            z-index: 0;
        }
        #ktp-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(1px);
            z-index: 1;
        }
        .ktp-content { 
            position: relative; 
            z-index: 2; 
            padding: 30px 40px; 
            height: 100%; 
            box-sizing: border-box; 
            color: black;
            font-weight: bold;
        }

        .title { text-align: center; font-size: 38px; margin-bottom: 5px; }
        .subtitle { text-align: center; font-size: 32px; margin-bottom: 25px; border-bottom: 3px solid black; padding-bottom: 10px; }

        .info { display: flex; justify-content: space-between; align-items: flex-start; }

        /* Titik dua (:) sejajar sempurna pakai table (paling stabil di semua device) */
        .left { width: 62%; }
        .left table {
            width: 100%;
            border-collapse: collapse;
        }
        .left td.label {
            width: 180px;
            padding-right: 10px;
            text-align: left;
            vertical-align: top;
            font-size: 21px;
        }
        .left td.colon {
            width: 15px;
            text-align: center;
            font-size: 21px;
        }
        .left td.value {
            text-align: left;
            font-size: 21px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            vertical-align: top;
        }
        #nik-row td { font-size: 28px; }

        .right { width: 35%; text-align: center; }
        #photo { width: 180px; height: 220px; border: 3px solid white; object-fit: cover; margin-top: 10px; border-radius: 5px; }
        .date { position: absolute; bottom: 30px; right: 102px; font-size: 26px; z-index: 2; }
        .credit { margin-top: 10px; font-size: 20px; }

        .actions { margin-top: 30px; }
        .actions button { width: auto; padding: 12px 30px; margin: 0 15px; font-size: 18px; }
        #btn-download { background: #28a745; }
        #btn-download:hover { background: #218838; }
        #btn-edit { background: #ffc107; color: black; }
        #btn-edit:hover { background: #e0a800; }
    </style>
</head>
<body>
    <div class="container">
        <div id="page1">
            <h1 style="text-align:center;">Generator KTP Mainan - Academy</h1>
            <form id="form">
                <input type="text" id="nowa" placeholder="Nomor WA (NIK) - boleh pakai spasi/- /+" required>
                <input type="text" id="nama" placeholder="Nama Lengkap" required>
                <input type="text" id="panggilan" placeholder="Nama Panggilan" required>
                <input type="date" id="tgl_lahir" required>
                <input type="text" id="tempat_tinggal" placeholder="Tempat Tinggal" required>
                <input type="text" id="gol_darah" placeholder="Golongan Darah (contoh: O)" required>
                <select id="jenis_kelamin" required>
                    <option value="" disabled selected>Jenis Kelamin</option>
                    <option value="Laki-laki">Laki-laki</option>
                    <option value="Perempuan">Perempuan</option>
                </select>
                <input type="text" id="agama" placeholder="Agama" required>
                <select id="status_pacaran" required>
                    <option value="" disabled selected>Status Pacaran</option>
                    <option value="Belum Pacaran">Belum Pacaran</option>
                    <option value="Sudah Pacaran">Sudah Pacaran</option>
                </select>
                <input type="text" id="pekerjaan" placeholder="Pekerjaan" required>
                <input type="text" id="kewarganegaraan" placeholder="Kewarganegaraan" value="WNI" required>
                <label>Foto Profil:</label>
                <input type="file" id="image" accept="image/*">
                <button type="submit">Generate KTP</button>
            </form>
            <button id="btn-autofill">üé≤ Auto Fill Random (Contoh)</button>
        </div>

        <div id="page2">
            <div id="ktp">
                <img id="ktp-bg" src="https://i.ibb.co/V0PMw4W1/20251222-035032.jpg" alt="Background">
                <div id="ktp-overlay"></div>
                <div class="ktp-content">
                    <div class="title">KARTU TANDA PENGHUNI ACADEMY</div>
                    <div class="subtitle">Academy Bijih Naga ~ ArcZ</div>
                    
                    <div class="info">
                        <div class="left">
                            <table>
                                <tr id="nik-row">
                                    <td class="label">NIK</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_nowa">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Nama</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_nama">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Panggilan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_panggilan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Tanggal Lahir</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_tgl">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Tempat Tinggal</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_tempat">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Gol. Darah</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_gol_darah">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Jenis Kelamin</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_jk">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Agama</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_agama">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Status Pacaran</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_status_pacaran">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Pekerjaan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_pekerjaan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Kewarganegaraan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_kewarganegaraan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Berlaku Hingga</td>
                                    <td class="colon">:</td>
                                    <td class="value">Selama gambar disimpan</td>
                                </tr>
                            </table>
                        </div>
                        <div class="right">
                            <img id="photo" src="" alt="Foto">
                            <div class="credit">¬© ArcZNewEra Academy</div>
                        </div>
                    </div>
                    
                    <div class="date" id="out_date">YYYY-MM-DD</div>
                </div>
            </div>

            <div class="actions">
                <button id="btn-download">üì• Download KTP</button>
                <button id="btn-edit">‚úèÔ∏è Edit / Kembali</button>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('form');
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');

        // Auto Fill Random
        document.getElementById('btn-autofill').addEventListener('click', function() {
            const namaLengkap = ["Ahmad Fauzi", "Siti Nurhaliza", "Budi Santoso", "Rina Wijaya", "Dian Sastro", "Muhammad Rizky", "Putri Marino", "Aditya Pratama"];
            const namaPanggilan = ["Fauzi", "Siti", "Budi", "Rina", "Dian", "Rizky", "Putri", "Adit"];
            const tempatTinggal = ["Jakarta", "Bandung", "Surabaya", "Yogyakarta", "Medan", "Semarang", "Bali", "Makassar"];
            const golDarah = ["A", "B", "AB", "O", "A+", "B+", "AB+", "O+"];
            const agama = ["Islam", "Kristen", "Katolik", "Hindu", "Buddha", "Konghucu"];
            const pekerjaan = ["Pelajar", "Mahasiswa", "Gamer Pro", "Content Creator", "Freelancer", "Pengusaha Muda", "Streamers", "Bijih Naga Hunter"];
            const statusPacaran = ["Belum Pacaran", "Sudah Pacaran"];

            document.getElementById('nowa').value = "08" + Math.floor(Math.random() * 9000000000 + 1000000000);
            const idx = Math.floor(Math.random() * namaLengkap.length);
            document.getElementById('nama').value = namaLengkap[idx];
            document.getElementById('panggilan').value = namaPanggilan[idx];
            const year = 1995 + Math.floor(Math.random() * 16);
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            document.getElementById('tgl_lahir').value = `\( {year}- \){month}-${day}`;
            document.getElementById('tempat_tinggal').value = tempatTinggal[Math.floor(Math.random() * tempatTinggal.length)];
            document.getElementById('gol_darah').value = golDarah[Math.floor(Math.random() * golDarah.length)];
            document.getElementById('jenis_kelamin').value = Math.random() > 0.5 ? "Laki-laki" : "Perempuan";
            document.getElementById('agama').value = agama[Math.floor(Math.random() * agama.length)];
            document.getElementById('status_pacaran').value = statusPacaran[Math.floor(Math.random() * statusPacaran.length)];
            document.getElementById('pekerjaan').value = pekerjaan[Math.floor(Math.random() * pekerjaan.length)];
            document.getElementById('image').value = "";
            alert("Form sudah diisi dengan data random! Klik Generate KTP untuk melihat hasil.");
        });

        // Generate KTP
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            let nikInput = document.getElementById('nowa').value;
            let nikClean = nikInput.replace(/[\s\-+]/g, '');
            document.getElementById('out_nowa').textContent = nikClean || '-';

            document.getElementById('out_nama').textContent = document.getElementById('nama').value;
            document.getElementById('out_panggilan').textContent = document.getElementById('panggilan').value;
            const tgl = new Date(document.getElementById('tgl_lahir').value);
            document.getElementById('out_tgl').textContent = tgl.toLocaleDateString('id-ID');
            document.getElementById('out_tempat').textContent = document.getElementById('tempat_tinggal').value;
            document.getElementById('out_gol_darah').textContent = document.getElementById('gol_darah').value.toUpperCase();
            document.getElementById('out_jk').textContent = document.getElementById('jenis_kelamin').value;
            document.getElementById('out_agama').textContent = document.getElementById('agama').value;
            document.getElementById('out_status_pacaran').textContent = document.getElementById('status_pacaran').value;
            document.getElementById('out_pekerjaan').textContent = document.getElementById('pekerjaan').value;
            document.getElementById('out_kewarganegaraan').textContent = document.getElementById('kewarganegaraan').value;

            const today = new Date();
            document.getElementById('out_date').textContent = today.getFullYear() + '-' + String(today.getMonth()+1).padStart(2,'0') + '-' + String(today.getDate()).padStart(2,'0');

            const file = document.getElementById('image').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(ev) {
                    document.getElementById('photo').src = ev.target.result;
                };
                reader.readAsDataURL(file);
            } else {
                document.getElementById('photo').src = "";
            }

            page1.style.display = 'none';
            page2.style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Edit / Kembali
        document.getElementById('btn-edit').addEventListener('click', function() {
            page2.style.display = 'none';
            page1.style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Download
        document.getElementById('btn-download').addEventListener('click', function() {
            html2canvas(document.getElementById('ktp'), {scale: 2, useCORS: true, backgroundColor: null}).then(canvas => {
                let link = document.createElement('a');
                link.download = 'KTP_Academy_' + (document.getElementById('out_nama').textContent || 'Unknown').replace(/\s+/g, '_') + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        });
    </script>
</body>
</html>        #ktp-overlay {
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.2);
            backdrop-filter: blur(1px);
            z-index: 1;
        }
        .ktp-content { 
            position: relative; 
            z-index: 2; 
            padding: 30px 40px; 
            height: 100%; 
            box-sizing: border-box; 
            color: black;
            font-weight: bold;
        }

        .title { text-align: center; font-size: 38px; margin-bottom: 5px; }
        .subtitle { text-align: center; font-size: 32px; margin-bottom: 25px; border-bottom: 3px solid black; padding-bottom: 10px; }

        .info { display: flex; justify-content: space-between; align-items: flex-start; }

        /* Titik dua (:) sejajar sempurna pakai table (paling stabil di semua device) */
        .left { width: 62%; }
        .left table {
            width: 100%;
            border-collapse: collapse;
        }
        .left td.label {
            width: 180px;
            padding-right: 10px;
            text-align: left;
            vertical-align: top;
            font-size: 21px;
        }
        .left td.colon {
            width: 15px;
            text-align: center;
            font-size: 21px;
        }
        .left td.value {
            text-align: left;
            font-size: 21px;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            vertical-align: top;
        }
        #nik-row td { font-size: 28px; }

        .right { width: 35%; text-align: center; }
        #photo { width: 180px; height: 220px; border: 3px solid white; object-fit: cover; margin-top: 10px; border-radius: 5px; }
        .date { position: absolute; bottom: 30px; right: 102px; font-size: 26px; z-index: 2; }
        .credit { margin-top: 10px; font-size: 20px; }

        .actions { margin-top: 30px; }
        .actions button { width: auto; padding: 12px 30px; margin: 0 15px; font-size: 18px; }
        #btn-download { background: #28a745; }
        #btn-download:hover { background: #218838; }
        #btn-edit { background: #ffc107; color: black; }
        #btn-edit:hover { background: #e0a800; }
    </style>
</head>
<body>
    <div class="container">
        <div id="page1">
            <h1 style="text-align:center;">Generator KTP Mainan - Academy</h1>
            <form id="form">
                <input type="text" id="nowa" placeholder="Nomor WA (NIK) - boleh pakai spasi/- /+" required>
                <input type="text" id="nama" placeholder="Nama Lengkap" required>
                <input type="text" id="panggilan" placeholder="Nama Panggilan" required>
                <input type="date" id="tgl_lahir" required>
                <input type="text" id="tempat_tinggal" placeholder="Tempat Tinggal" required>
                <input type="text" id="gol_darah" placeholder="Golongan Darah (contoh: O)" required>
                <select id="jenis_kelamin" required>
                    <option value="" disabled selected>Jenis Kelamin</option>
                    <option value="Laki-laki">Laki-laki</option>
                    <option value="Perempuan">Perempuan</option>
                </select>
                <input type="text" id="agama" placeholder="Agama" required>
                <select id="status_pacaran" required>
                    <option value="" disabled selected>Status Pacaran</option>
                    <option value="Belum Pacaran">Belum Pacaran</option>
                    <option value="Sudah Pacaran">Sudah Pacaran</option>
                </select>
                <input type="text" id="pekerjaan" placeholder="Pekerjaan" required>
                <input type="text" id="kewarganegaraan" placeholder="Kewarganegaraan" value="WNI" required>
                <label>Foto Profil:</label>
                <input type="file" id="image" accept="image/*">
                <button type="submit">Generate KTP</button>
            </form>
            <button id="btn-autofill">üé≤ Auto Fill Random (Contoh)</button>
        </div>

        <div id="page2">
            <div id="ktp">
                <img id="ktp-bg" src="https://i.ibb.co/V0PMw4W1/20251222-035032.jpg" alt="Background">
                <div id="ktp-overlay"></div>
                <div class="ktp-content">
                    <div class="title">KARTU TANDA PENGHUNI ACADEMY</div>
                    <div class="subtitle">Academy Bijih Naga ~ ArcZ</div>
                    
                    <div class="info">
                        <div class="left">
                            <table>
                                <tr id="nik-row">
                                    <td class="label">NIK</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_nowa">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Nama</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_nama">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Panggilan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_panggilan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Tanggal Lahir</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_tgl">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Tempat Tinggal</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_tempat">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Gol. Darah</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_gol_darah">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Jenis Kelamin</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_jk">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Agama</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_agama">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Status Pacaran</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_status_pacaran">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Pekerjaan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_pekerjaan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Kewarganegaraan</td>
                                    <td class="colon">:</td>
                                    <td class="value"><span id="out_kewarganegaraan">-</span></td>
                                </tr>
                                <tr>
                                    <td class="label">Berlaku Hingga</td>
                                    <td class="colon">:</td>
                                    <td class="value">Selama gambar disimpan</td>
                                </tr>
                            </table>
                        </div>
                        <div class="right">
                            <img id="photo" src="" alt="Foto">
                            <div class="credit">¬© ArcZNewEra Academy</div>
                        </div>
                    </div>
                    
                    <div class="date" id="out_date">YYYY-MM-DD</div>
                </div>
            </div>

            <div class="actions">
                <button id="btn-download">üì• Download KTP</button>
                <button id="btn-edit">‚úèÔ∏è Edit / Kembali</button>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('form');
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');

        // Auto Fill Random
        document.getElementById('btn-autofill').addEventListener('click', function() {
            const namaLengkap = ["Ahmad Fauzi", "Siti Nurhaliza", "Budi Santoso", "Rina Wijaya", "Dian Sastro", "Muhammad Rizky", "Putri Marino", "Aditya Pratama"];
            const namaPanggilan = ["Fauzi", "Siti", "Budi", "Rina", "Dian", "Rizky", "Putri", "Adit"];
            const tempatTinggal = ["Jakarta", "Bandung", "Surabaya", "Yogyakarta", "Medan", "Semarang", "Bali", "Makassar"];
            const golDarah = ["A", "B", "AB", "O", "A+", "B+", "AB+", "O+"];
            const agama = ["Islam", "Kristen", "Katolik", "Hindu", "Buddha", "Konghucu"];
            const pekerjaan = ["Pelajar", "Mahasiswa", "Gamer Pro", "Content Creator", "Freelancer", "Pengusaha Muda", "Streamers", "Bijih Naga Hunter"];
            const statusPacaran = ["Belum Pacaran", "Sudah Pacaran"];

            document.getElementById('nowa').value = "08" + Math.floor(Math.random() * 9000000000 + 1000000000);
            const idx = Math.floor(Math.random() * namaLengkap.length);
            document.getElementById('nama').value = namaLengkap[idx];
            document.getElementById('panggilan').value = namaPanggilan[idx];
            const year = 1995 + Math.floor(Math.random() * 16);
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            document.getElementById('tgl_lahir').value = `\( {year}- \){month}-${day}`;
            document.getElementById('tempat_tinggal').value = tempatTinggal[Math.floor(Math.random() * tempatTinggal.length)];
            document.getElementById('gol_darah').value = golDarah[Math.floor(Math.random() * golDarah.length)];
            document.getElementById('jenis_kelamin').value = Math.random() > 0.5 ? "Laki-laki" : "Perempuan";
            document.getElementById('agama').value = agama[Math.floor(Math.random() * agama.length)];
            document.getElementById('status_pacaran').value = statusPacaran[Math.floor(Math.random() * statusPacaran.length)];
            document.getElementById('pekerjaan').value = pekerjaan[Math.floor(Math.random() * pekerjaan.length)];
            document.getElementById('image').value = "";
            alert("Form sudah diisi dengan data random! Klik Generate KTP untuk melihat hasil.");
        });

        // Generate KTP
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            let nikInput = document.getElementById('nowa').value;
            let nikClean = nikInput.replace(/[\s\-+]/g, '');
            document.getElementById('out_nowa').textContent = nikClean || '-';

            document.getElementById('out_nama').textContent = document.getElementById('nama').value;
            document.getElementById('out_panggilan').textContent = document.getElementById('panggilan').value;
            const tgl = new Date(document.getElementById('tgl_lahir').value);
            document.getElementById('out_tgl').textContent = tgl.toLocaleDateString('id-ID');
            document.getElementById('out_tempat').textContent = document.getElementById('tempat_tinggal').value;
            document.getElementById('out_gol_darah').textContent = document.getElementById('gol_darah').value.toUpperCase();
            document.getElementById('out_jk').textContent = document.getElementById('jenis_kelamin').value;
            document.getElementById('out_agama').textContent = document.getElementById('agama').value;
            document.getElementById('out_status_pacaran').textContent = document.getElementById('status_pacaran').value;
            document.getElementById('out_pekerjaan').textContent = document.getElementById('pekerjaan').value;
            document.getElementById('out_kewarganegaraan').textContent = document.getElementById('kewarganegaraan').value;

            const today = new Date();
            document.getElementById('out_date').textContent = today.getFullYear() + '-' + String(today.getMonth()+1).padStart(2,'0') + '-' + String(today.getDate()).padStart(2,'0');

            const file = document.getElementById('image').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(ev) {
                    document.getElementById('photo').src = ev.target.result;
                };
                reader.readAsDataURL(file);
            } else {
                document.getElementById('photo').src = "";
            }

            page1.style.display = 'none';
            page2.style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Edit / Kembali
        document.getElementById('btn-edit').addEventListener('click', function() {
            page2.style.display = 'none';
            page1.style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Download
        document.getElementById('btn-download').addEventListener('click', function() {
            html2canvas(document.getElementById('ktp'), {scale: 2, useCORS: true, backgroundColor: null}).then(canvas => {
                let link = document.createElement('a');
                link.download = 'KTP_Academy_' + (document.getElementById('out_nama').textContent || 'Unknown').replace(/\s+/g, '_') + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        });
    </script>
</body>
</html>            content: '';
            position: absolute;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(255,255,255,0.4);
            backdrop-filter: blur(3px);
            z-index: 1;
        }
        .ktp-content { position: relative; z-index: 2; padding: 30px 40px; height: 100%; box-sizing: border-box; }
        .title { text-align: center; font-size: 38px; margin-bottom: 5px; }
        .subtitle { text-align: center; font-size: 32px; margin-bottom: 25px; border-bottom: 3px solid black; padding-bottom: 10px; }
        .info { display: flex; justify-content: space-between; align-items: flex-start; }
        .left { width: 62%; }
        .right { width: 35%; text-align: center; }
        .field { display: flex; align-items: center; margin: 2px 0; font-size: 21px; }
        .field-label { width: 170px; flex-shrink: 0; }
        .field-value { flex: 1; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; }
        #nik-field { font-size: 28px; margin-bottom: 8px; }
        #photo { width: 180px; height: 220px; border: 3px solid white; object-fit: cover; margin-top: 10px; border-radius: 5px; }
        .date { position: absolute; bottom: 30px; right: 102px; font-size: 26px; }
        .credit { margin-top: 10px; font-size: 20px; }
        .actions { margin-top: 30px; }
        .actions button { width: auto; padding: 12px 30px; margin: 0 15px; font-size: 18px; }
        #btn-download { background: #28a745; }
        #btn-download:hover { background: #218838; }
        #btn-edit { background: #ffc107; color: black; }
        #btn-edit:hover { background: #e0a800; }
    </style>
</head>
<body>
    <div class="container">
        <!-- Halaman 1: Form Input -->
        <div id="page1">
            <h1 style="text-align:center;">Generator KTP Mainan - Academy</h1>
            <form id="form">
                <input type="text" id="nowa" placeholder="Nomor WA (NIK) - boleh pakai spasi/- /+" required>
                <input type="text" id="nama" placeholder="Nama Lengkap" required>
                <input type="text" id="panggilan" placeholder="Nama Panggilan" required>
                <input type="date" id="tgl_lahir" required>
                <input type="text" id="tempat_tinggal" placeholder="Tempat Tinggal" required>
                <input type="text" id="gol_darah" placeholder="Golongan Darah (contoh: O)" required>
                <select id="jenis_kelamin" required>
                    <option value="" disabled selected>Jenis Kelamin</option>
                    <option value="Laki-laki">Laki-laki</option>
                    <option value="Perempuan">Perempuan</option>
                </select>
                <input type="text" id="agama" placeholder="Agama" required>
                <select id="status_pacaran" required>
                    <option value="" disabled selected>Status Pacaran</option>
                    <option value="Belum Pacaran">Belum Pacaran</option>
                    <option value="Sudah Pacaran">Sudah Pacaran</option>
                </select>
                <input type="text" id="pekerjaan" placeholder="Pekerjaan" required>
                <input type="text" id="kewarganegaraan" placeholder="Kewarganegaraan (contoh: WNI)" value="WNI" required>
                <label>Foto Profil (pilih dari galeri):</label>
                <input type="file" id="image" accept="image/*"> <!-- Tidak required biar bisa auto fill tanpa foto -->
                <button type="submit">Generate KTP</button>
            </form>
            <button id="btn-autofill">üé≤ Auto Fill Random (Contoh)</button>
        </div>

        <!-- Halaman 2: Hasil KTP -->
        <div id="page2">
            <div id="ktp">
                <div class="ktp-content">
                    <div class="title">KARTU TANDA PENGHUNI ACADEMY</div>
                    <div class="subtitle">Academy Bijih Naga ~ ArcZ</div>
                    
                    <div class="info">
                        <div class="left">
                            <div class="field" id="nik-field">
                                <div class="field-label">NIK</div>
                                <div class="field-value">: <span id="out_nowa">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Nama</div>
                                <div class="field-value">: <span id="out_nama">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Panggilan</div>
                                <div class="field-value">: <span id="out_panggilan">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Tanggal Lahir</div>
                                <div class="field-value">: <span id="out_tgl">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Tempat Tinggal</div>
                                <div class="field-value">: <span id="out_tempat">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Gol. Darah</div>
                                <div class="field-value">: <span id="out_gol_darah">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Jenis Kelamin</div>
                                <div class="field-value">: <span id="out_jk">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Agama</div>
                                <div class="field-value">: <span id="out_agama">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Status Pacaran</div>
                                <div class="field-value">: <span id="out_status_pacaran">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Pekerjaan</div>
                                <div class="field-value">: <span id="out_pekerjaan">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Kewarganegaraan</div>
                                <div class="field-value">: <span id="out_kewarganegaraan">-</span></div>
                            </div>
                            <div class="field">
                                <div class="field-label">Berlaku Hingga</div>
                                <div class="field-value">: Selama gambar disimpan</div>
                            </div>
                        </div>
                        <div class="right">
                            <img id="photo" src="" alt="Foto">
                            <div class="credit">¬© ArcZNewEra Academy</div>
                        </div>
                    </div>
                    
                    <div class="date" id="out_date">YYYY-MM-DD</div>
                </div>
            </div>

            <div class="actions">
                <button id="btn-download">üì• Download KTP</button>
                <button id="btn-edit">‚úèÔ∏è Edit / Kembali</button>
            </div>
        </div>
    </div>

    <script>
        const form = document.getElementById('form');
        const page1 = document.getElementById('page1');
        const page2 = document.getElementById('page2');
        const ktp = document.getElementById('ktp');

        // Data random untuk contoh
        const namaLengkap = ["Ahmad Fauzi", "Siti Nurhaliza", "Budi Santoso", "Rina Wijaya", "Dian Sastro", "Muhammad Rizky", "Putri Marino", "Aditya Pratama"];
        const namaPanggilan = ["Fauzi", "Siti", "Budi", "Rina", "Dian", "Rizky", "Putri", "Adit"];
        const tempatTinggal = ["Jakarta", "Bandung", "Surabaya", "Yogyakarta", "Medan", "Semarang", "Bali", "Makassar"];
        const golDarah = ["A", "B", "AB", "O", "A+", "B+", "AB+", "O+"];
        const agama = ["Islam", "Kristen", "Katolik", "Hindu", "Buddha", "Konghucu"];
        const pekerjaan = ["Pelajar", "Mahasiswa", "Gamer Pro", "Content Creator", "Freelancer", "Pengusaha Muda", "Streamers", "Bijih Naga Hunter"];
        const statusPacaran = ["Belum Pacaran", "Sudah Pacaran"];

        // Tombol Auto Fill Random
        document.getElementById('btn-autofill').addEventListener('click', function() {
            // NIK (nomor WA random Indonesia)
            document.getElementById('nowa').value = "08" + Math.floor(Math.random() * 9000000000 + 1000000000);

            // Nama acak
            const idx = Math.floor(Math.random() * namaLengkap.length);
            document.getElementById('nama').value = namaLengkap[idx];
            document.getElementById('panggilan').value = namaPanggilan[idx];

            // Tanggal lahir random (umur 15-30 tahun)
            const year = 1995 + Math.floor(Math.random() * 16);
            const month = String(Math.floor(Math.random() * 12) + 1).padStart(2, '0');
            const day = String(Math.floor(Math.random() * 28) + 1).padStart(2, '0');
            document.getElementById('tgl_lahir').value = `\( {year}- \){month}-${day}`;

            // Tempat tinggal
            document.getElementById('tempat_tinggal').value = tempatTinggal[Math.floor(Math.random() * tempatTinggal.length)];

            // Golongan darah
            document.getElementById('gol_darah').value = golDarah[Math.floor(Math.random() * golDarah.length)];

            // Jenis kelamin (acak)
            const jk = Math.random() > 0.5 ? "Laki-laki" : "Perempuan";
            document.getElementById('jenis_kelamin').value = jk;

            // Agama
            document.getElementById('agama').value = agama[Math.floor(Math.random() * agama.length)];

            // Status pacaran
            document.getElementById('status_pacaran').value = statusPacaran[Math.floor(Math.random() * statusPacaran.length)];

            // Pekerjaan
            document.getElementById('pekerjaan').value = pekerjaan[Math.floor(Math.random() * pekerjaan.length)];

            // Kewarganegaraan tetap WNI
            document.getElementById('kewarganegaraan').value = "WNI";

            // Foto tetap kosong (biar bisa pilih manual, atau skip kalau mau generate tanpa foto)
            document.getElementById('image').value = "";

            alert("Form sudah diisi dengan data contoh random! Klik Generate KTP untuk lihat hasil.");
        });

        // Generate KTP (sama seperti sebelumnya)
        form.addEventListener('submit', function(e) {
            e.preventDefault();

            let nikInput = document.getElementById('nowa').value;
            let nikClean = nikInput.replace(/[\s\-+]/g, '');
            document.getElementById('out_nowa').textContent = nikClean || '-';

            document.getElementById('out_nama').textContent = document.getElementById('nama').value;
            document.getElementById('out_panggilan').textContent = document.getElementById('panggilan').value;
            const tgl = new Date(document.getElementById('tgl_lahir').value);
            document.getElementById('out_tgl').textContent = tgl.toLocaleDateString('id-ID');
            document.getElementById('out_tempat').textContent = document.getElementById('tempat_tinggal').value;
            document.getElementById('out_gol_darah').textContent = document.getElementById('gol_darah').value.toUpperCase();
            document.getElementById('out_jk').textContent = document.getElementById('jenis_kelamin').value;
            document.getElementById('out_agama').textContent = document.getElementById('agama').value;
            document.getElementById('out_status_pacaran').textContent = document.getElementById('status_pacaran').value;
            document.getElementById('out_pekerjaan').textContent = document.getElementById('pekerjaan').value;
            document.getElementById('out_kewarganegaraan').textContent = document.getElementById('kewarganegaraan').value;

            const today = new Date();
            document.getElementById('out_date').textContent = today.getFullYear() + '-' + 
                String(today.getMonth()+1).padStart(2,'0') + '-' + 
                String(today.getDate()).padStart(2,'0');

            const file = document.getElementById('image').files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(ev) {
                    document.getElementById('photo').src = ev.target.result;
                };
                reader.readAsDataURL(file);
            } else {
                // Kalau tidak ada foto, pakai placeholder atau kosongkan
                document.getElementById('photo').src = "";
            }

            page1.style.display = 'none';
            page2.style.display = 'block';
            window.scrollTo(0, 0);
        });

        // Tombol Edit & Download tetap sama
        document.getElementById('btn-edit').addEventListener('click', function() {
            page2.style.display = 'none';
            page1.style.display = 'block';
            window.scrollTo(0, 0);
        });

        document.getElementById('btn-download').addEventListener('click', function() {
            html2canvas(ktp, {scale: 2}).then(canvas => {
                let link = document.createElement('a');
                link.download = 'KTP_Academy_' + (document.getElementById('out_nama').textContent || 'Unknown').replace(/\s+/g, '_') + '.png';
                link.href = canvas.toDataURL('image/png');
                link.click();
            });
        });
    </script>
</body>
</html>
